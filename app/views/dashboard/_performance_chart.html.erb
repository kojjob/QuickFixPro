<div class="h-64 flex items-end space-x-2" 
     data-dashboard-target="performanceChart"
     role="img"
     aria-label="Performance trends chart showing <%= @performance_trends.length %> data points with average score of <%= @average_score %>%">
  <% if @performance_trends.any? %>
    <% max_score = @performance_trends.map { |t| t[:score] }.max.to_f %>
    <% @performance_trends.each do |trend| %>
      <% height = max_score > 0 ? (trend[:score] / max_score * 100) : 0 %>
      <div class="flex-1 bg-blue-500 hover:bg-blue-600 rounded-t transition-all duration-500 relative group focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2" 
           data-chart-bar
           style="height: <%= height %>%"
           role="img"
           aria-label="Performance score <%= trend[:score] %>% on <%= Date.parse(trend[:date]).strftime('%B %d') %>"
           tabindex="0">
        <div class="absolute bottom-full mb-2 left-1/2 transform -translate-x-1/2 hidden group-hover:block">
          <div class="bg-gray-900 text-white text-xs rounded py-1 px-2 whitespace-nowrap">
            <%= trend[:score] %>%
            <br>
            <span class="text-gray-300"><%= Date.parse(trend[:date]).strftime("%b %d") %></span>
            <div class="absolute top-full left-1/2 transform -translate-x-1/2 -mt-1">
              <div class="border-4 border-transparent border-t-gray-900"></div>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  <% else %>
    <div class="w-full h-full flex items-center justify-center text-gray-400">
      <div class="text-center">
        <svg class="w-12 h-12 mx-auto mb-2 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
        </svg>
        No performance data available yet
      </div>
    </div>
  <% end %>
</div>
<div class="mt-4 flex items-center justify-between text-xs text-gray-500">
  <span><%= @performance_trends.any? ? "#{@performance_trends.length} data points" : "No data" %></span>
  <span>Average: <%= @average_score %>%</span>
</div>